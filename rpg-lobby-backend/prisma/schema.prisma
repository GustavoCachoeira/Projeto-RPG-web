generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id        Int      @id @default(autoincrement())
  name      String
  email     String   @unique
  password  String
  role      String
  createdAt DateTime @default(now())
  lobbies   Lobby[]  @relation("MasterLobbies")
  invites   Invite[]
  characterSheets CharacterSheet[]
}

model Lobby {
  id        Int      @id @default(autoincrement())
  name      String
  masterId  Int
  master    User     @relation("MasterLobbies", fields: [masterId], references: [id])
  invites   Invite[]
  createdAt DateTime @default(now())
  characterSheets CharacterSheet[]
}

model Invite {
  id        Int      @id @default(autoincrement())
  lobbyId   Int
  lobby     Lobby    @relation(fields: [lobbyId], references: [id])
  playerId  Int
  player    User     @relation(fields: [playerId], references: [id])
  status    String   @default("pending")
  createdAt DateTime @default(now())
}

model CharacterSheet {
  id          Int      @id @default(autoincrement())
  playerId    Int
  player      User     @relation(fields: [playerId], references: [id])
  lobbyId     Int
  lobby       Lobby    @relation(fields: [lobbyId], references: [id])
  name        String
  strength    Int      @default(8)
  constitution Int     @default(8)
  dexterity   Int      @default(8)
  intelligence Int     @default(8)
  wisdom      Int      @default(8)
  charisma    Int      @default(8)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}